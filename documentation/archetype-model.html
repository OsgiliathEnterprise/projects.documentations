<!DOCTYPE html>
<html class="no-js" lang="en">
<head>
  <meta charset="utf-8">
  <title>Model Archetype - Osgiliath Enterprise framework</title>
  <meta name="author" content="Charlie Mordant">

  
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://OsgiliathEnterprise.github.io/documentation/archetype-model.html">
  <link href="/projects.documentations/favicon.png" type="image/png" rel="icon">
  <link href="/atom.xml" rel="alternate" title="Osgiliath Enterprise framework" type="application/atom+xml">

  <!-- http://opengraphprotocol.org/ -->
  <meta name="twitter:card" content="summary_large_image">
  <meta property="og:type" content="website">
  <meta property="og:url" content="http://OsgiliathEnterprise.github.io/documentation/archetype-model.html">
  <meta property="og:title" content="Model Archetype - Osgiliath Enterprise framework">
  

  <script src="/projects.documentations/javascripts/libs/jquery/jquery-2.0.3.min.js"></script>

<link href="/projects.documentations/assets/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="/projects.documentations/assets/bootstrap/dist/css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">


  
  <link href="/projects.documentations/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

  
   <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-52173804-1', 'auto');
    ga('send', 'pageview');

  </script>


</head>

  <body   >
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="wrap">
      <header role="banner">
        <nav class="navbar navbar-default" role="navigation">
    <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/projects.documentations/">Osgiliath Enterprise framework</a>
        </div>

        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
                <li >
                    <a rel="index" href="/projects.documentations/">Blog</a>
                </li>
                <li >
                    <a href="/projects.documentations/blog/archives">Archives</a>
                </li>
            </ul>
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a class="subscribe-rss" href="/atom.xml" title="subscribe via RSS">
                        <span class="visible-xs">RSS</span>
                        <img class="hidden-xs" src="/projects.documentations/images/rss.png" alt="RSS">
                    </a>
                </li>
                
            </ul>
            
                <form class="search navbar-form navbar-right" action="https://www.google.com/search" method="GET">
                    <input type="hidden" name="q" value="site:OsgiliathEnterprise.github.io">
                    <div class="form-group">
                        <input class="form-control" type="text" name="q" placeholder="Search">
                    </div>
                </form>
            
        </div>
    </div>
</nav>


      </header>
      <div id="main" role="main" class="container">
        <div id="content">
          <div class="row">
  <div class="page-content col-md-9">
    <article role="article">
      
        <header class="page-header">
          
            <p class="meta text-muted text-uppercase">












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-06-22T18:37:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time></p>
          
          
            <h1 class="entry-title">
              Model Archetype
              
            </h1>
          
        </header>
      
      <div class="entry-content">
        <article>
It&#8217;s purpose is to make the database access available, it can also exposes Dao&#8217;s as services.
It&#8217;s composed of two modules: a database one and a model one.
<article>
<header>
<H2>Database module</H2>
</header>
Here you can specify your database access configuration and expose the connections as OSGI services that will be consumed by the model module.

By default Derby databases are supported, but you can tweak it to support Oracle, Mysql, PostGres, HSQL&#8230;

The database configuration file must be located in the src/main/resources/OSGI-INF/blueprint/&lt;whatever&gt;.xml

Here&#8217;s how to declare a datasource bean:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">class=</span><span class="s">&quot;org.apache.derby.jdbc.EmbeddedXADataSource&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;databaseName&quot;</span> <span class="na">value=</span><span class="s">&quot;myDatabase&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>	<span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;createDatabase&quot;</span> <span class="na">value=</span><span class="s">&quot;create&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></td></tr></table></div></figure>
 Here&#8217;s how to expose the database as a service without transaction support:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">interface=</span><span class="s">&quot;javax.sql.DataSource&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>	<span class="nt">&lt;service-properties&gt;</span>
</span><span class='line'>		<span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;osgi.jndi.service.name&quot;</span> <span class="na">value=</span><span class="s">&quot;jdbc/myDatabaseConnection&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>	<span class="nt">&lt;/service-properties&gt;</span>
</span><span class='line'><span class="nt">&lt;/service&gt;</span>
</span></code></pre></td></tr></table></div></figure>
And with transactional support:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service</span> <span class="na">ref=</span><span class="s">&quot;dataSource&quot;</span> <span class="na">interface=</span><span class="s">&quot;javax.sql.XADataSource&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>	<span class="nt">&lt;service-properties&gt;</span>
</span><span class='line'>		<span class="nt">&lt;entry</span> <span class="na">key=</span><span class="s">&quot;osgi.jndi.service.name&quot;</span> <span class="na">value=</span><span class="s">&quot;jdbc/myXADatabaseConnection&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>	<span class="nt">&lt;/service-properties&gt;</span>
</span><span class='line'><span class="nt">&lt;/service&gt;</span>
</span></code></pre></td></tr></table></div></figure>

Defining an other kind of datasource:

You must define a new feature on the parent project features list (see features sub-module), containing the OSGI compliant database driver (in order to see if it&#8217;s OSGI compliant, check the META-INF/MANIFEST.MF file on the jar, it must contains an Export-Package  section.
Then, modify the osgi.bnd file of the database module removing the org.apache.derby.jdbc
package import and adding those of your driver.

Finally change the dataSource bean declaration in the blueprint file.
</article>
<article>
<header>
<H2>JPA module</H2>
</header>
The model module is here to define your model objects (those which will be persisted) as well as the method for accessing them.

<p>Datasource connection definition:
Edit the src/main/resources/META-INF/persistence.xml file of your module and change the &lt;jta-data-source&gt;osgi:service/jdbc/myXADB&lt;/jta-data-source&gt; and the &lt;non-jta-data-source&gt; Sections.
If you want to disable the transactional access, you&#8217;ve also to change the &#8216;transaction-type&#8217; value to &#8216;RESOURCE_LOCAL&#8217;
</p>
<p>
Model object definition:
In order to define a new model object, you&#8217;ve got to extends the &#8216;AbstractEntity&#8217; abstract class on your src/main/lombok folder.
All Java files that are located on this folder will be &#8216;delombokized&#8217; I.e they will interpret the lombok annotation and generate the according Java code.
Here&#8217;s an example of a model entity:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="nd">@Data</span><span class="c1">//equals, hashcode, getters and setters</span>
</span><span class='line'><span class="nd">@Builder</span><span class="c1">//builder pattern</span>
</span><span class='line'><span class="nd">@NoArgsConstructor</span><span class="c1">//constructor</span>
</span><span class='line'><span class="nd">@AllArgsConstructor</span><span class="c1">//other constructor</span>
</span><span class='line'><span class="nd">@Entity</span><span class="c1">//persistence class declaration</span>
</span><span class='line'><span class="nd">@XmlRootElement</span><span class="c1">//xml marshalling</span>
</span><span class='line'><span class="nd">@EqualsAndHashCode</span><span class="o">(</span><span class="n">callSuper</span><span class="o">=</span><span class="kc">true</span><span class="o">)</span>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloObject</span> <span class="kd">extends</span> <span class="n">AbstractEntity</span> <span class="kd">implements</span> <span class="n">Serializable</span><span class="o">{</span>
</span><span class='line'>	<span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kd">transient</span> <span class="kt">long</span> <span class="n">serialVersionUID</span> <span class="o">=</span> <span class="mi">6233801298404301547L</span><span class="o">;</span>
</span><span class='line'>	<span class="nd">@XmlElement</span><span class="c1">//XML node</span>
</span><span class='line'>	<span class="nd">@NotNull</span><span class="o">(</span><span class="n">message</span><span class="o">=</span><span class="s">&quot;message must not be null&quot;</span><span class="o">)</span><span class="c1">//Validation for null object</span>
</span><span class='line'>	<span class="nd">@Size</span><span class="o">(</span><span class="n">min</span><span class="o">=</span><span class="mi">2</span><span class="o">,</span> <span class="n">max</span><span class="o">=</span><span class="mi">12</span><span class="o">,</span> <span class="n">message</span><span class="o">=</span><span class="s">&quot;message size must be between 2 and 12&quot;</span><span class="o">)</span><span class="c1">//size validation</span>
</span><span class='line'>	<span class="nd">@Pattern</span><span class="o">(</span><span class="n">regexp</span><span class="o">=</span><span class="s">&quot;[a-zA-Z0-9]+&quot;</span><span class="o">,</span> <span class="n">message</span><span class="o">=</span><span class="s">&quot;must not contain special characters&quot;</span><span class="o">)</span><span class="c1">//pattern validation</span>
</span><span class='line'>	<span class="kd">private</span> <span class="n">String</span> <span class="n">helloMessage</span><span class="o">;</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
Then reference this class on the &lt;class&gt; section of the src/main/resources/META-INF/persistence.xml file
</p>
<p>
Declaring DAOs
In order to declare a Data Access Object its API via an interface:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">interface</span> <span class="nc">HelloObjectRepository</span> <span class="o">{</span>
</span><span class='line'>	<span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">HelloObject</span><span class="o">&gt;</span> <span class="nf">findByHelloObjectMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message_p</span><span class="o">);</span>
</span><span class='line'>	<span class="kd">public</span> <span class="o">&lt;</span><span class="n">S</span> <span class="kd">extends</span> <span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">S</span> <span class="nf">save</span><span class="o">(</span><span class="n">S</span> <span class="n">entity</span><span class="o">);</span>
</span><span class='line'>	<span class="kd">public</span> <span class="n">List</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="nf">findAll</span><span class="o">();</span>	
</span><span class='line'>	<span class="kt">void</span> <span class="nf">deleteAll</span><span class="o">();</span>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>

Then, with the help of spring data jpa, that make all the basic operations available, you&#8217;ve to code a very small implementation:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">HelloObjectJpaRepository</span> <span class="kd">extends</span> <span class="n">SimpleJpaRepository</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">,</span> <span class="n">Long</span><span class="o">&gt;</span> <span class="kd">implements</span> <span class="n">HelloObjectRepository</span> <span class="o">{</span>
</span><span class='line'>	<span class="nd">@Setter</span>
</span><span class='line'>	<span class="kd">private</span> <span class="n">EntityManager</span> <span class="n">entityManager</span><span class="o">;</span>
</span><span class='line'>	<span class="kd">public</span> <span class="nf">HelloObjectJpaRepository</span><span class="o">(</span><span class="n">Class</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">domainClass</span><span class="o">,</span>
</span><span class='line'>			<span class="n">EntityManager</span> <span class="n">em</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>		<span class="kd">super</span><span class="o">(</span><span class="n">domainClass</span><span class="o">,</span> <span class="n">em</span><span class="o">);</span>
</span><span class='line'>		<span class="n">setEntityManager</span><span class="o">(</span><span class="n">em</span><span class="o">);</span>
</span><span class='line'>	<span class="o">}</span>
</span><span class='line'>	<span class="nd">@Override</span>
</span><span class='line'>	<span class="kd">public</span> <span class="n">Collection</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">HelloObject</span><span class="o">&gt;</span> <span class="nf">findByHelloObjectMessage</span><span class="o">(</span><span class="n">String</span> <span class="n">message_p</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>		<span class="n">CriteriaBuilder</span> <span class="n">cb</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">getCriteriaBuilder</span><span class="o">();</span>
</span><span class='line'>		<span class="n">CriteriaQuery</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">cq</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">HelloObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>		<span class="n">Root</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">helloObject</span> <span class="o">=</span> <span class="n">cq</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">HelloObject</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
</span><span class='line'>		<span class="n">cq</span><span class="o">.</span><span class="na">select</span><span class="o">(</span><span class="n">helloObject</span><span class="o">);</span>
</span><span class='line'>		<span class="n">Predicate</span> <span class="n">where</span> <span class="o">=</span> <span class="n">cb</span><span class="o">.</span><span class="na">equal</span><span class="o">(</span><span class="n">helloObject</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">&quot;message&quot;</span><span class="o">),</span> <span class="n">message_p</span><span class="o">);</span>
</span><span class='line'>		<span class="n">cq</span><span class="o">.</span><span class="na">where</span><span class="o">(</span><span class="n">where</span><span class="o">);</span>
</span><span class='line'>		<span class="n">TypedQuery</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">q</span> <span class="o">=</span> <span class="n">entityManager</span><span class="o">.</span><span class="na">createQuery</span><span class="o">(</span><span class="n">cq</span><span class="o">);</span>
</span><span class='line'>		<span class="n">List</span><span class="o">&lt;</span><span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="na">getResultList</span><span class="o">();</span>
</span><span class='line'>		<span class="k">return</span> <span class="n">result</span><span class="o">;</span>
</span><span class='line'>	<span class="o">}</span>
</span><span class='line'>	<span class="nd">@Override</span>
</span><span class='line'>	<span class="kd">public</span> <span class="o">&lt;</span><span class="n">S</span> <span class="kd">extends</span> <span class="n">HelloObject</span><span class="o">&gt;</span> <span class="n">S</span> <span class="nf">save</span><span class="o">(</span><span class="n">S</span> <span class="n">entity</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>		<span class="k">return</span> <span class="kd">super</span><span class="o">.</span><span class="na">save</span><span class="o">(</span><span class="n">entity</span><span class="o">);</span>
</span><span class='line'>	<span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>
</p>
<p>
Finally, you&#8217;ve to define the bean on the src/main/resources/OSGI-INF/blueprint/<whatever>.xml
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;bean</span> <span class="na">id=</span><span class="s">&quot;helloObjectRepository&quot;</span> <span class="na">class=</span><span class="s">&quot;net....repository.impl.HelloObjectJpaRepository&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>	<span class="nt">&lt;argument</span> <span class="na">value=</span><span class="s">&quot;net...model.HelloObject&quot;</span><span class="nt">&gt;&lt;/argument&gt;</span><span class="c">&lt;!-- model object--&gt;</span>
</span><span class='line'>	<span class="nt">&lt;jpa:context</span> <span class="na">unitname=</span><span class="s">&quot;myPu&quot;</span><span class="nt">&gt;&lt;/jpa:context&gt;</span> <span class="c">&lt;!-- name of the persistence unit in the META-INF/persistence.xml --&gt;</span>
</span><span class='line'>	<span class="nt">&lt;tx:transaction</span> <span class="na">method=</span><span class="s">&quot;*&quot;</span> <span class="na">value=</span><span class="s">&quot;Required&quot;</span> <span class="nt">/&gt;</span><span class="c">&lt;!-- activate transaction support --&gt;</span>
</span><span class='line'><span class="nt">&lt;/bean&gt;</span>
</span></code></pre></td></tr></table></div></figure>

You can also expose this bean on the OSGI service registry as follow:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;service</span> <span class="na">ref=</span><span class="s">&quot;helloObjectRepository&quot;</span> <span class="na">interface=</span><span class="s">&quot;net...repository.HelloObjectRepository&quot;</span> <span class="nt">/&gt;</span>
</span></code></pre></td></tr></table></div></figure>
</p>
<article>
<header>
<H3>Adding JMS, REST or integration Tests to the JPA module</H3>
</header>
In order to add REST or JMS support to the JPA module, remove all net.osgiliath features on the pom.xml and add this one:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>	<span class="nt">&lt;groupId&gt;</span>net.osgiliath.framework<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>	<span class="nt">&lt;version&gt;</span>${osgiliath.framework.maven.version}<span class="nt">&lt;/version&gt;</span>
</span><span class='line'>	<span class="nt">&lt;artifactId&gt;</span>net.osgiliath.features.karaf-features-full<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>	<span class="nt">&lt;type&gt;</span>xml<span class="nt">&lt;/type&gt;</span>
</span><span class='line'>	<span class="nt">&lt;classifier&gt;</span>features<span class="nt">&lt;/classifier&gt;</span>
</span><span class='line'><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></td></tr></table></div></figure>
And the same for your projects feature (in the features module of your parent pom).
Then, add these lines on your osgi.bnd Import-Package section:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> org.springframework.transaction,\
</span><span class='line'> javax.transaction,\
</span><span class='line'> org.apache.camel,\
</span><span class='line'> org.springframework.validation.beanvalidation,\
</span><span class='line'> *
</span></code></pre></td></tr></table></div></figure>
For JMS, and the following for REST:
<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'> org.apache.cxf.jaxrs.provider,\
</span><span class='line'> org.apache.cxf.jaxrs.provider.json,\
</span><span class='line'> org.apache.cxf.jaxrs.impl.tl,\
</span><span class='line'> helpers.cxf.exception.handling.jaxrs.mapper,\
</span><span class='line'> *
</span></code></pre></td></tr></table></div></figure>
Finally, follow the REST, JMS or Itests sections of the business module documentation
</article>
</article>
</article>
      </div>
      
        <footer>
          <p class="meta text-muted">
            
            












<span class="glyphicon glyphicon-calendar"></span> <time datetime="2014-06-22T18:37:00+02:00"  data-updated="true" itemprop="datePublished dateCreated">ordinal</time>
            
          </p>
          
            <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://OsgiliathEnterprise.github.io/documentation/archetype-model.html" data-via="Tcharl" data-counturl="http://OsgiliathEnterprise.github.io/documentation/archetype-model.html" >Tweet</a>
  
  
  <div class="g-plusone" data-size="small"></div>
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

          
        </footer>
      
    </article>
    
      <section>
        <h2>Comments</h2>
        <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
      </section>
    
  </div>

  
    <aside class="sidebar col-md-3">
      
        <section class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Recent Posts</h3>
  </div>
  
  <div id="recent_posts" class="list-group">
    
    <a class="list-group-item " href="/projects.documentations/blog/2014/06/22/changelogs/">Changelogs</a>
    
  </div>
</section>

<section class="panel panel-default clearfix">
  <div class="panel-heading">
      <h3 class="panel-title">GitHub Repos</h3>
  </div>
  <div class="list-group" id="gh_repos">
    <p class="loading">Status updating&#8230;</p>
  </div>
  
    <div class="gh-profile-link pull-right text-muted">
      <a href="https://github.com/OsgiliathEnterprise">@OsgiliathEnterprise</a> on GitHub
    </div>
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'OsgiliathEnterprise',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/projects.documentations/javascripts/github.js" type="text/javascript"> </script>
</section>




<section class="googleplus panel panel-default">
  <div class="panel-body">
    <h2>
      <a href="https://plus.google.com/+CharlieMordant?rel=author">
        <img src="http://www.google.com/images/icons/ui/gprofile_button-32.png" width="32" height="32">
        Google+
      </a>
    </h2>
  </div>
</section>



      
    </aside>
  
</div>

        </div>
      </div>
    </div>
    <footer role="contentinfo"><div class="container">
    <p class="text-muted credits">
  Copyright &copy; 2014 - Charlie Mordant<br>
  <small>
      <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>,
      <span class="credit">customized with <a href="https://github.com/kAworu/octostrap3">octostrap3</a></span>.
  </small>
</p>

</div>
</footer>
    

<script type="text/javascript">
      var disqus_shortname = 'osgiliathenterprise';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://OsgiliathEnterprise.github.io/documentation/archetype-model.html';
        var disqus_url = 'http://OsgiliathEnterprise.github.io/documentation/archetype-model.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


<script src="/projects.documentations/assets/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="/projects.documentations/javascripts/modernizr-2.0.js"></script>


  </body>
</html>
